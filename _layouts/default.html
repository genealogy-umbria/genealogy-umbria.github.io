<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <meta charset="UTF-8">
  <title>{{ page.title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* Navbar styling */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #222;
      padding: 0.6em 1em;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.5em;
      z-index: 1000;
    }
    nav a {
      color: white;
      background: #444;
      padding: 0.5em 0.9em;
      border-radius: 6px;
      text-decoration: none;
      font-size: clamp(14px, 2vw, 18px);
      transition: background 0.2s;
    }
    nav a:hover {
      background: #666;
    }
    nav a.active {
      background: #0080ff;
      font-weight: bold;
    }

    /* Push page content below navbar */
    body {
	  margin: 0;
	  padding-top: 3.5em; /* push below navbar */
	  
	  /* System font stack (fast, clean, readable everywhere) */
	  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
				   Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
	  
	  /* Comfortable font size and line spacing */
	  font-size: 16px;
	  line-height: 1.6;
	  
	  /* Improve text rendering */
	  -webkit-font-smoothing: antialiased;
	  -moz-osx-font-smoothing: grayscale;
	  text-rendering: optimizeLegibility;
	  
	  color: #111; /* softer black for readability */
	}

	main {
	  max-width: 800px;   /* narrower column for readability */
	  margin: 0 auto;
	  padding: 1em;
	}

	/* keep centering for all content images (no tags needed) */
	img {
	  max-width: 90%;
	  max-height: 60vh;
	  display: block;
	  margin: 1em auto;
	}

	/* but explicitly exclude any images inside the map so Leaflet tiles/markers are untouched */
	.muni-map-wrapper img,
	.leaflet-container img {
	  margin: 0;
	  max-width: none;
	  max-height: none;
	}
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav>
    <a href="/index.html" class="{% if page.url == '/' or page.url == '/index.html' %}active{% endif %}">Home</a>
    <a href="/muni_list.html" class="{% if page.url == '/muni_list.html' %}active{% endif %}">Comuni pages</a>
    <a href="/dioceses.html" class="{% if page.url == '/dioceses.html' %}active{% endif %}">Dioceses</a>
    <a href="/military_divs.html" class="{% if page.url == '/military_divs.html' %}active{% endif %}">Military records</a>
    <a href="/misc_sources/misc_sources.html" class="{% if page.url == '/misc_sources/misc_sources.html' %}active{% endif %}">Other sources</a>
    <a href="/misc_sources/hamlets_list.html" class="{% if page.url == '/misc_sources/hamlets_list.html' %}active{% endif %}">List of all hamlets</a>
  </nav>

  <!-- Page content -->
  <main>
    {{ content }}
  </main>
	<script>
	  document.addEventListener("DOMContentLoaded", function () {
		const links = document.querySelectorAll("a[href]");
		links.forEach(link => {
		  const href = link.getAttribute("href");
		  // If link starts with http and is NOT same origin â†’ external
		  if (href.startsWith("http") && !href.includes(window.location.hostname)) {
			link.setAttribute("target", "_blank");
			link.setAttribute("rel", "noopener noreferrer"); // security best practice
		  }
		});
	  });
	</script>
</body>
</html>
